
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://vllm-project.github.io/vllm-spyre/contributing/index.html">
      
      
        <link rel="prev" href="../user_guide/supported_models.html">
      
      
        <link rel="next" href="architecture.html">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Contributing - vLLM Spyre Plugin</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#contributing-to-vllm-spyre" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="vLLM Spyre Plugin" class="md-header__button md-logo" aria-label="vLLM Spyre Plugin" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            vLLM Spyre Plugin
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Contributing
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2c-1.82 0-3.53.5-5 1.35C8 5.08 10 8.3 10 12s-2 6.92-5 8.65C6.47 21.5 8.18 22 10 22a10 10 0 0 0 10-10A10 10 0 0 0 10 2"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/vllm-project/vllm-spyre" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../index.html" class="md-tabs__link">
          
  
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../getting_started/installation.html" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../deploying/docker.html" class="md-tabs__link">
          
  
  
  Deploying

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../user_guide/configuration.html" class="md-tabs__link">
          
  
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="index.html" class="md-tabs__link">
          
  
  
  Developer Guide

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="vLLM Spyre Plugin" class="md-nav__button md-logo" aria-label="vLLM Spyre Plugin" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    vLLM Spyre Plugin
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/vllm-project/vllm-spyre" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../index.html" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../getting_started/installation.html" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../deploying/docker.html" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Deploying
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../user_guide/configuration.html" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Developer Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Developer Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="index.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issues
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Docs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-the-docs-with-mkdocs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Building the docs with MkDocs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building the docs with MkDocs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-mkdocs-and-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install MkDocs and Plugins
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-the-development-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Start the Development Server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#view-in-your-browser" class="md-nav__link">
    <span class="md-ellipsis">
      
        View in Your Browser
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#learn-more" class="md-nav__link">
    <span class="md-ellipsis">
      
        Learn More
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-locally-on-cpu-no-spyre-card" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Locally on CPU (No Spyre card)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-continuous-batching" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Continuous Batching
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debugging
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Debugging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logging-levels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logging levels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance Metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#topology-aware-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Topology Aware Allocation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pull-requests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pull Requests
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pull Requests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linting
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dco-and-signed-off-by" class="md-nav__link">
    <span class="md-ellipsis">
      
        DCO and Signed-off-by
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    <span class="md-ellipsis">
      
        License
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="architecture.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Continuous Batching
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Continuous Batching
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="continuous_batching/overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="continuous_batching/tests/output_tests.html" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Tests
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issues
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Docs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#building-the-docs-with-mkdocs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Building the docs with MkDocs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building the docs with MkDocs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-mkdocs-and-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install MkDocs and Plugins
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-the-development-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Start the Development Server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#view-in-your-browser" class="md-nav__link">
    <span class="md-ellipsis">
      
        View in Your Browser
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#learn-more" class="md-nav__link">
    <span class="md-ellipsis">
      
        Learn More
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-locally-on-cpu-no-spyre-card" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Locally on CPU (No Spyre card)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-continuous-batching" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Continuous Batching
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debugging
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Debugging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logging-levels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logging levels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance Metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#topology-aware-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Topology Aware Allocation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pull-requests" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pull Requests
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pull Requests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Linting
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dco-and-signed-off-by" class="md-nav__link">
    <span class="md-ellipsis">
      
        DCO and Signed-off-by
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    <span class="md-ellipsis">
      
        License
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="contributing-to-vllm-spyre">Contributing to vLLM Spyre<a class="headerlink" href="#contributing-to-vllm-spyre" title="Permanent link">&para;</a></h1>
<p>Thank you for your interest in contributing to the Spyre plugin for vLLM! There are several ways you can contribute:</p>
<ul>
<li>Identify and report any issues or bugs.</li>
<li>Suggest or implement new features.</li>
<li>Improve documentation or contribute a how-to guide.</li>
</ul>
<h2 id="issues">Issues<a class="headerlink" href="#issues" title="Permanent link">&para;</a></h2>
<p>If you encounter a bug or have a feature request, please search <a href="https://github.com/vllm-project/vllm-spyre/issues?q=is%3Aissue">existing issues</a> first to see if it has already been reported. If not, please <a href="https://github.com/vllm-project/vllm-spyre/issues/new/choose">create a new issue</a>, providing as much relevant information as possible.</p>
<p>You can also reach out for support in the <code>#sig-spyre</code> channel in the <a href="https://inviter.co/vllm-slack">vLLM Slack</a> workspace.</p>
<h2 id="docs">Docs<a class="headerlink" href="#docs" title="Permanent link">&para;</a></h2>
<h3 id="building-the-docs-with-mkdocs">Building the docs with MkDocs<a class="headerlink" href="#building-the-docs-with-mkdocs" title="Permanent link">&para;</a></h3>
<h4 id="install-mkdocs-and-plugins">Install MkDocs and Plugins<a class="headerlink" href="#install-mkdocs-and-plugins" title="Permanent link">&para;</a></h4>
<p>Install MkDocs along with the <a href="https://github.com/vllm-project/vllm-spyre/blob/main/mkdocs.yaml">plugins</a> used in the vLLM Spyre documentation.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>uv<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>docs/requirements-docs.txt
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ensure that your Python version is compatible with the plugins (e.g., <code>mkdocs-awesome-nav</code> requires Python 3.10+)</p>
</div>
<h4 id="start-the-development-server">Start the Development Server<a class="headerlink" href="#start-the-development-server" title="Permanent link">&para;</a></h4>
<p>MkDocs comes with a built-in dev-server that lets you preview your documentation as you work on it.</p>
<p>Make sure you're in the same directory as the <code>mkdocs.yml</code> configuration file in the <code>vllm-spyre</code> repository, and then start the server by running the <code>mkdocs serve</code> command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>mkdocs<span class="w"> </span>serve
</span></code></pre></div>
<p>Example output:</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="go">INFO    -  Documentation built in 106.83 seconds</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="go">INFO    -  [22:02:02] Watching paths for changes: &#39;docs&#39;, &#39;mkdocs.yaml&#39;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="go">INFO    -  [22:02:02] Serving on http://127.0.0.1:8000/</span>
</span></code></pre></div>
<h4 id="view-in-your-browser">View in Your Browser<a class="headerlink" href="#view-in-your-browser" title="Permanent link">&para;</a></h4>
<p>Open up <a href="http://127.0.0.1:8000/">http://127.0.0.1:8000/</a> in your browser to see a live preview:.</p>
<h4 id="learn-more">Learn More<a class="headerlink" href="#learn-more" title="Permanent link">&para;</a></h4>
<p>For additional features and advanced configurations, refer to the official <a href="https://www.mkdocs.org/">MkDocs Documentation</a>.</p>
<h2 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h2>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When running tests, if errors occur, these can be analyzed/debugged by setting <code>DISABLE_ASSERTS = True</code> in spyre_util.py and by rerunning the test using <code>pytest --capture=no tests/spyre/test_spyre_basic.py</code>. After debugging, <code>DISABLE_ASSERTS</code> should be reset to <code>False</code>.</p>
</div>
<h3 id="testing-locally-on-cpu-no-spyre-card">Testing Locally on CPU (No Spyre card)<a class="headerlink" href="#testing-locally-on-cpu-no-spyre-card" title="Permanent link">&para;</a></h3>
<p>Optionally, download the <code>ibm-ai-platform/micro-g3.3-8b-instruct-1b</code> model:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;from transformers import pipeline; pipeline(&#39;text-generation&#39;, model=&#39;ibm-ai-platform/micro-g3.3-8b-instruct-1b&#39;)&quot;</span>
</span></code></pre></div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The Hugging Face API download does <strong>not</strong> work on <code>arm64</code>.</p>
</div>
<p>By default, the model is saved to <code>.cache/huggingface/hub/models--ibm-ai-platform--micro-g3.3-8b-instruct-1b</code>.</p>
<p>Then, source the environment variables:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nb">source</span><span class="w"> </span>_local_envs_for_test.sh
</span></code></pre></div>
<p>Optionally, install development dependencies:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>uv<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--group<span class="w"> </span>dev
</span></code></pre></div>
<p>Now, you can run the tests:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>python<span class="w"> </span>-m<span class="w"> </span>pytest<span class="w"> </span>-v<span class="w"> </span>-x<span class="w"> </span>tests<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;cpu and e2e&quot;</span>
</span></code></pre></div>
<p>Here is a list of <code>pytest</code> markers you can use to filter them:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">markers</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>    <span class="s2">&quot;skip_global_cleanup&quot;</span><span class="p">,</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    <span class="s2">&quot;e2e: Tests using end-to-end engine spin-up&quot;</span><span class="p">,</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    <span class="s2">&quot;basic: Basic correctness tests&quot;</span><span class="p">,</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="s2">&quot;cb: Continuous batching tests&quot;</span><span class="p">,</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>    <span class="s2">&quot;chunked_prefill: Tests with chunked prefill enabled&quot;</span><span class="p">,</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>    <span class="s2">&quot;cpu: Tests using CPU (i.e. eager) backend&quot;</span><span class="p">,</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>    <span class="s2">&quot;compat: backward compatibility tests&quot;</span><span class="p">,</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>    <span class="s2">&quot;spyre: Tests using Spyre hardware backend&quot;</span><span class="p">,</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>    <span class="s2">&quot;decoder: Tests for decoder models&quot;</span><span class="p">,</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>    <span class="s2">&quot;embedding: Tests for embedding models&quot;</span><span class="p">,</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>    <span class="s2">&quot;quantized: Tests for quantized models&quot;</span><span class="p">,</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>    <span class="s2">&quot;multi: Tests that require &gt;1 cards&quot;</span><span class="p">,</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>    <span class="s2">&quot;utils: Tests for utility functions&quot;</span><span class="p">,</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>    <span class="s2">&quot;worker: Tests for worker logic&quot;</span><span class="p">,</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="p">]</span>
</span></code></pre></div>
<h3 id="testing-continuous-batching">Testing Continuous Batching<a class="headerlink" href="#testing-continuous-batching" title="Permanent link">&para;</a></h3>
<p>Run the continuous batching tests:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>python<span class="w"> </span>-m<span class="w"> </span>pytest<span class="w"> </span>-v<span class="w"> </span>-x<span class="w"> </span>tests/e2e<span class="w"> </span>-m<span class="w"> </span>cb
</span></code></pre></div>
<h2 id="debugging">Debugging<a class="headerlink" href="#debugging" title="Permanent link">&para;</a></h2>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can <code>oc edit</code> a pod and change the image without having the pod schedule to a different node. This can be useful for testing whether software or hardware is the issue.</p>
</div>
<ul>
<li>
<p>The script <code>/opt/sentient/bin/aiu-query-devices</code> in the pod can be used to see the connectivity between the <code>AIUs</code> on the machine. You can also infer this from environment variables with names like <code>AIU_TIER_\d_SET_\d_RANK_\d</code>.</p>
</li>
<li>
<p><code>SPYRE_DEVICES</code> can be used to select which devices will be selected for each <code>RANK</code>. This is similar to how <code>CUDA_VISIBLE_DEVICES</code> works for GPU.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p><code>0,2,4,6</code> will assign rank <code>0</code> to AIU index <code>0</code>, rank <code>1</code> to AIU index <code>2</code>, rank <code>2</code> to AIU index <code>4</code>, and rank <code>3</code> to AIU index <code>6</code>.</p>
</div>
<ul>
<li>An alternative is to use <code>AIU_WORLD_RANK_\d=0000:aa:00.0</code> to explicitly map ranks to <code>PCI</code> addresses (make sure there are no duplicates used at runtime).</li>
</ul>
</li>
<li>
<p>A bash script that uses <code>/opt/sentient/senlib/bin/senlib_unit_test</code> to check each <code>AIU</code> allocated to the pod to see if they work for a basic test:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="c1"># A bash script that uses `/opt/sentient/senlib/bin/senlib_unit_test` </span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="c1"># to check each AIU allocated to the pod to see if </span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="c1"># they work for a basic test:</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="nv">cleanup_done</span><span class="o">=</span><span class="m">0</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>cleanup<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$cleanup_done</span><span class="s2">&quot;</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-f<span class="w"> </span>~/.senlib.json.bak<span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Restoring .senlib.json from backup&quot;</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">    </span>cp<span class="w"> </span>~/.senlib.json.bak<span class="w"> </span>~/.senlib.json
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">    </span><span class="nv">cleanup_done</span><span class="o">=</span><span class="m">1</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">  </span><span class="k">fi</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">  </span><span class="nb">kill</span><span class="w"> </span>--<span class="w"> </span>-<span class="nv">$PPID</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">  </span><span class="nb">wait</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="w">  </span><span class="nb">exit</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="o">}</span>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>
</span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="nb">trap</span><span class="w"> </span>cleanup<span class="w"> </span>EXIT<span class="w"> </span>SIGINT
</span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>
</span><span id="__span-9-21"><a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="c1"># Create backup .senlib.json if it doesn&#39;t exist</span>
</span><span id="__span-9-22"><a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">&quot;</span>/.senlib.json<span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-9-23"><a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>!<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">&quot;</span>/.senlib.json.bak<span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-9-24"><a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Creating backup of </span><span class="nv">$HOME</span><span class="s2">/.senlib.json&quot;</span>
</span><span id="__span-9-25"><a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="w">    </span>cp<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">&quot;</span>/.senlib.json<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">&quot;</span>/.senlib.json.bak
</span><span id="__span-9-26"><a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a><span class="w">  </span><span class="k">else</span>
</span><span id="__span-9-27"><a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.senlib.json.bak already exists&quot;</span>
</span><span id="__span-9-28"><a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a><span class="w">  </span><span class="k">fi</span>
</span><span id="__span-9-29"><a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a><span class="k">fi</span>
</span><span id="__span-9-30"><a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a>
</span><span id="__span-9-31"><a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a><span class="k">for</span><span class="w"> </span>device_id<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>jq<span class="w"> </span>-r<span class="w"> </span>.GENERAL.sen_bus_id<span class="o">[]</span><span class="w"> </span>/etc/aiu/senlib_config.json<span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-9-32"><a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a><span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;======================================================================&quot;</span>
</span><span id="__span-9-33"><a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a><span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Checking AIU </span><span class="si">${</span><span class="nv">device_id</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-9-34"><a id="__codelineno-9-34" name="__codelineno-9-34" href="#__codelineno-9-34"></a><span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;======================================================================&quot;</span>
</span><span id="__span-9-35"><a id="__codelineno-9-35" name="__codelineno-9-35" href="#__codelineno-9-35"></a><span class="w">  </span>jq<span class="w"> </span>-n<span class="w"> </span><span class="s1">&#39;{&quot;GENERAL&quot;: { &quot;sen_bus_id&quot;: &quot;&#39;</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">device_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="s1">&#39;&quot; }}&#39;</span><span class="w"> </span>&gt;<span class="w"> </span>.senlib.json
</span><span id="__span-9-36"><a id="__codelineno-9-36" name="__codelineno-9-36" href="#__codelineno-9-36"></a><span class="w">  </span><span class="c1"># run in background to not override bash signal handler</span>
</span><span id="__span-9-37"><a id="__codelineno-9-37" name="__codelineno-9-37" href="#__codelineno-9-37"></a><span class="w">  </span>timeout<span class="w"> </span><span class="m">10</span><span class="w"> </span>/opt/sentient/senlib/bin/senlib_unit_test<span class="w"> </span>--gtest_filter<span class="o">=</span>SmlPF1VF0.Open<span class="w"> </span><span class="p">&amp;</span>
</span><span id="__span-9-38"><a id="__codelineno-9-38" name="__codelineno-9-38" href="#__codelineno-9-38"></a><span class="w">  </span><span class="nb">wait</span>
</span><span id="__span-9-39"><a id="__codelineno-9-39" name="__codelineno-9-39" href="#__codelineno-9-39"></a><span class="k">done</span>
</span></code></pre></div>
</li>
</ul>
<h3 id="logging-levels">Logging levels<a class="headerlink" href="#logging-levels" title="Permanent link">&para;</a></h3>
<p>Various log levels that can be configured:</p>
<ul>
<li><code>DTLOG_LEVEL</code> - <code>TRACE, DEBUG, INFO, WARNING, ERROR</code></li>
<li><code>TORCH_SENDNN_LOG</code> - <code>WARNING, CRITICAL</code></li>
<li><code>VLLM_LOGGING_LEVEL</code> - <code>DEBUG, INFO, WARNING, ERROR</code></li>
<li><code>DT_DEEPRT_VERBOSE</code> - <code>0, -1</code></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><code>DTLOG_LEVEL=INFO</code> (piped to file) can help you see what device addresses are actually in use. Look for the string <code>Opened: SEN:VFIO</code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Set <code>DT_DEEPRT_VERBOSE</code> to 0 to enable verbose compiler prints for debugging.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In order to stop massive log spew, this configuration is ideal:
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>export DTLOG_LEVEL=ERROR
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>export TORCH_SENDNN_LOG=CRITICAL
</span></code></pre></div></p>
</div>
<p>For tensor-parallel debugging, you can enable an option to redirect all log output from each rank to an individual file.
Set <code>VLLM_SPYRE_WORKER_LOG_REDIRECT_DIR</code> to a local directory, and each rank will redirect stdout and stderr into their own file inside the directory.
This can be helpful to avoid having interleaved stack dumps from different ranks in stderr.</p>
<h3 id="performance-metrics">Performance Metrics<a class="headerlink" href="#performance-metrics" title="Permanent link">&para;</a></h3>
<p>When deploying to kubernetes clusters, prometheus + grafana can be installed and configured to scrape metrics from vLLM's <code>/metrics</code> endpoint.</p>
<p>vLLM can also be configured to log performance metrics about every request to a local file.
Setting both <code>VLLM_SPYRE_PERF_METRIC_LOGGING_ENABLED=1</code> and <code>VLLM_SPYRE_PERF_METRIC_LOGGING_DIR=/some/path</code> and ensuring that vLLM stat logging is enabled will generate metrics in <code>/some/path/request_metrics.jsonl</code>. A sample of this file looks like:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="p">{</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-10-10T12:25:17.544&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;prefill_interrupt_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;decode_only_itl_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05045744727055232</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;finish_reason&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;num_prompt_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;num_generation_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;max_tokens_param&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;e2e_latency_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9784879684448242</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;queued_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">6.0582999140024185e-05</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;prefill_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.220398832927458</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;inference_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9772605419857427</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;decode_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7568617090582848</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;mean_time_per_output_token_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05045744727055232</span><span class="p">}</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="p">{</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-10-10T12:25:19.632&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;prefill_interrupt_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;decode_only_itl_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10008190000274529</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;finish_reason&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;num_prompt_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;num_generation_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;max_tokens_param&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;e2e_latency_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.0864057540893555</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;queued_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2935298749944195</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;prefill_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1466117500094697</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;inference_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.647840250050649</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;decode_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5012285000411794</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;mean_time_per_output_token_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10008190000274529</span><span class="p">}</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="p">{</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-10-10T12:25:19.632&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;prefill_interrupt_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.14661192893981934</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;decode_only_itl_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1000875825372835</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;finish_reason&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;num_prompt_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;num_generation_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;max_tokens_param&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;e2e_latency_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.0864808559417725</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;queued_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1469848749693483</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;prefill_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.14646116609219462</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;inference_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.7943868330912665</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;decode_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.6479256669990718</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;mean_time_per_output_token_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10986171113327145</span><span class="p">}</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="p">{</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-10-10T12:25:19.632&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;prefill_interrupt_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.29317212104797363</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;decode_only_itl_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10008799746477355</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;finish_reason&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;num_prompt_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;num_generation_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;max_tokens_param&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;e2e_latency_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.08658504486084</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;queued_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001724999165162444</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;prefill_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.14670966705307364</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;inference_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.9412017500726506</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;decode_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.794492083019577</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;mean_time_per_output_token_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.11963280553463847</span><span class="p">}</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="p">{</span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-10-10T12:25:19.632&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;prefill_interrupt_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4400491714477539</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;decode_only_itl_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10009045804229875</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;finish_reason&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;num_prompt_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;num_generation_tokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;max_tokens_param&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;e2e_latency_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.0868380069732666</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;queued_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.9250048100948334e-05</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;prefill_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1447284579044208</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;inference_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">2.086134499986656</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;decode_time_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.9414060420822352</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;mean_time_per_output_token_seconds&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.12942706947214902</span><span class="p">}</span>
</span></code></pre></div>
<h3 id="topology-aware-allocation">Topology Aware Allocation<a class="headerlink" href="#topology-aware-allocation" title="Permanent link">&para;</a></h3>
<p>This section is specific to the AIU operator and scheduling workloads onto specific cards.</p>
<p>(TODO: link to docs once they exist)</p>
<ul>
<li>
<p>This mode supports users to request a special set of AIU cards based on <code>PCI</code> topology. By using this mode, we can guarantee to pick up AIU cards of a particular class in the node:</p>
<ul>
<li><code>Tier0</code> provides a set of cards in the same <code>PCI</code> switch.</li>
<li><code>Tier1</code> provides a set of cards from at most one-hop away <code>PCI</code> switch.</li>
<li><code>Tier2</code> provides a set of cards from at most two-hops away <code>PCI</code> switch.</li>
</ul>
</li>
<li>
<p>Running a Multi AIU Job using <code>ibm.com/aiu_pf_tier0,tier1,tier2</code>:</p>
<ul>
<li>This resource type is used for picking up a topology aware card set, which is required to run tensor parallel (<code>TP</code>) workloads more effectively. By using <code>tierX</code> class resource, <code>TP</code> users can automatically get a best performing card set for the workload.</li>
</ul>
</li>
<li>
<p>The maximum number of allocatable resources in each tier depends on the platform &amp; cluster, but we can get up to:</p>
<ul>
<li><code>Tier0</code> - <code>4</code> cards</li>
<li><code>Tier1</code> - <code>8</code> cards</li>
<li><code>Tier2</code> - <code>16</code> cards</li>
</ul>
</li>
<li>
<p>Devices in <code>tier0</code> can do <code>peer-to-peer (P2P) RDMA</code>, devices on different trees use <code>Host DMA</code> sharing files through <code>/dev/shm</code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you request cards greater than the cards supported by the switch, the pod will never be scheduled. In the above example, if you specify <code>ibm.com/aiu_pf_tier0: 5</code> in your yaml, the pod will never be scheduled because the maximum set of cards in <code>tier0</code> was specified as <code>4</code>.</p>
</div>
</li>
</ul>
<h2 id="pull-requests">Pull Requests<a class="headerlink" href="#pull-requests" title="Permanent link">&para;</a></h2>
<h3 id="linting">Linting<a class="headerlink" href="#linting" title="Permanent link">&para;</a></h3>
<p>When submitting a PR, please make sure your code passes all linting checks. You can install the linting requirements using either <code>uv</code> or <code>pip</code>.</p>
<p>Using <code>uv</code>:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>uv<span class="w"> </span>sync<span class="w"> </span>--frozen<span class="w"> </span>--group<span class="w"> </span>lint<span class="w"> </span>--active<span class="w"> </span>--inexact
</span></code></pre></div>
<p>Using <code>pip</code>:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>uv<span class="w"> </span>pip<span class="w"> </span>compile<span class="w"> </span>--group<span class="w"> </span>lint<span class="w"> </span>&gt;<span class="w"> </span>requirements-lint.txt
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements-lint.txt
</span></code></pre></div>
<p>After installing the requirements, run the formatting script:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>bash<span class="w"> </span>format.sh
</span></code></pre></div>
<p>Then, make sure to commit any changes made by the formatter:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>git<span class="w"> </span>add<span class="w"> </span>.
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>git<span class="w"> </span>commit<span class="w"> </span>-s<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Apply linting and formatting&quot;</span>
</span></code></pre></div>
<h3 id="dco-and-signed-off-by">DCO and Signed-off-by<a class="headerlink" href="#dco-and-signed-off-by" title="Permanent link">&para;</a></h3>
<p>When contributing, you must agree to the <a href="https://github.com/vllm-project/vllm-spyre/blob/main/DCO">DCO</a>.Commits must include a <code>Signed-off-by:</code> header which certifies agreement with the terms of the DCO.</p>
<p>Using <code>-s</code> with <code>git commit</code> will automatically add this header.</p>
<h2 id="license">License<a class="headerlink" href="#license" title="Permanent link">&para;</a></h2>
<p>See <a href="https://github.com/vllm-project/vllm-spyre/blob/main/LICENSE"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 0c4.42 0 8 3.58 8 8a8.01 8.01 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27s-1.36.09-2 .27c-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8"/></svg></span> LICENSE</a>.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["content.code.copy", "content.tabs.link", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.prune", "navigation.top", "search.highlight", "search.share", "toc.follow"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
      
    
  </body>
</html>